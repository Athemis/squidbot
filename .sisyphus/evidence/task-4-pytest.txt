============================= test session starts ==============================
platform linux -- Python 3.14.3, pytest-9.0.2, pluggy-1.6.0 -- /home/opencode/projects/squidbot/.venv/bin/python
cachedir: .pytest_cache
rootdir: /home/opencode/projects/squidbot
configfile: pyproject.toml
plugins: asyncio-1.3.0, anyio-4.12.1
asyncio: mode=Mode.AUTO, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 12 items

tests/core/test_memory.py::test_build_messages_includes_your_memory_heading_when_present PASSED [  8%]
tests/core/test_memory.py::test_build_messages_includes_only_last_history_context_messages_labelled PASSED [ 16%]
tests/core/test_memory.py::test_build_messages_does_not_inject_conversation_summary_block PASSED [ 25%]
tests/core/test_memory.py::test_build_messages_labels_owner_for_unscoped_alias PASSED [ 33%]
tests/core/test_memory.py::test_build_messages_scoped_alias_only_labels_in_matching_channel PASSED [ 41%]
tests/core/test_memory.py::test_build_messages_owner_alias_matching_is_case_sensitive PASSED [ 50%]
tests/core/test_memory.py::test_build_messages_sender_id_none_with_channel_labels_unknown PASSED [ 58%]
tests/core/test_memory.py::test_build_messages_checks_scoped_alias_before_returning_unscoped_match PASSED [ 66%]
tests/core/test_memory.py::test_build_messages_legacy_history_without_channel_or_sender_is_unchanged PASSED [ 75%]
tests/core/test_memory.py::test_persist_exchange_appends_user_then_assistant_with_metadata PASSED [ 83%]
tests/core/test_memory.py::test_init_rejects_zero_history_context_messages PASSED [ 91%]
tests/core/test_memory.py::test_init_rejects_negative_history_context_messages PASSED [100%]

============================== 12 passed in 0.17s ==============================
